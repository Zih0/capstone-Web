{"ast":null,"code":"import _slicedToArray from\"/Users/ziho/testapp2/capstoneWeb/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import{withRouter}from'react-router-dom';import{loginUser}from'../../../_actions/user_actions';import{Formik}from'formik';import*as Yup from'yup';import{Form,Input,Button,Checkbox,Typography}from'antd';import{UserOutlined,LockOutlined}from'@ant-design/icons';import{useDispatch}from'react-redux';var Title=Typography.Title;function LoginPage(props){var dispatch=useDispatch();var rememberMeChecked=localStorage.getItem('rememberMe')?true:false;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formErrorMessage=_useState2[0],setFormErrorMessage=_useState2[1];var _useState3=useState(rememberMeChecked),_useState4=_slicedToArray(_useState3,2),rememberMe=_useState4[0],setRememberMe=_useState4[1];var handleRememberMe=function handleRememberMe(){setRememberMe(!rememberMe);};var initialEmail=localStorage.getItem('rememberMe')?localStorage.getItem('rememberMe'):'';return/*#__PURE__*/_jsx(Formik,{initialValues:{email:'',password:''},validationSchema:Yup.object().shape({email:Yup.string().email('Email 형태로 입력해주세요').required('Email을 입력해주세요'),password:Yup.string().min(6,'비밀번호는 최소 6자 이상 입력해주세요').required('비밀번호를 입력해주세요')}),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){var dataToSubmit={email:values.email,password:values.password};dispatch(loginUser(dataToSubmit)).then(function(response){if(response.payload.loginSuccess){window.localStorage.setItem('userId',response.payload.userId);if(rememberMe===true){window.localStorage.setItem('rememberMe',values.id);}else{localStorage.removeItem('rememberMe');}props.history.push('/');}else{setFormErrorMessage(response.payload.message);}}).catch(function(err){setFormErrorMessage('이메일 또는 비밀번호를 확인해주세요.');setTimeout(function(){setFormErrorMessage('');},3000);});setSubmitting(false);},500);},children:function children(props){var values=props.values,touched=props.touched,errors=props.errors,dirty=props.dirty,isSubmitting=props.isSubmitting,handleChange=props.handleChange,handleBlur=props.handleBlur,handleSubmit=props.handleSubmit,handleReset=props.handleReset;return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Title,{level:2,children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{width:'350px'},children:[/*#__PURE__*/_jsxs(Form.Item,{required:true,children:[/*#__PURE__*/_jsx(Input,{id:\"email\",prefix:/*#__PURE__*/_jsx(UserOutlined,{style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Email\",type:\"email\",value:values.email,onChange:handleChange,onBlur:handleBlur,className:errors.email&&touched.email?'text-input error':'text-input'}),errors.email&&touched.email&&/*#__PURE__*/_jsx(\"div\",{className:\"input-feedback\",children:errors.email})]}),/*#__PURE__*/_jsxs(Form.Item,{required:true,children:[/*#__PURE__*/_jsx(Input,{id:\"password\",prefix:/*#__PURE__*/_jsx(LockOutlined,{style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",type:\"password\",value:values.password,onChange:handleChange,onBlur:handleBlur,className:errors.password&&touched.password?'text-input error':'text-input'}),errors.password&&touched.password&&/*#__PURE__*/_jsx(\"div\",{className:\"input-feedback\",children:errors.password})]}),formErrorMessage&&/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"p\",{style:{color:'#ff0000bf',fontSize:'0.7rem',border:'1px solid',padding:'1rem',borderRadius:'10px'},children:formErrorMessage})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Checkbox,{id:\"rememberMe\",onChange:handleRememberMe,checked:rememberMe,children:\"\\uC790\\uB3D9 \\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",style:{minWidth:'100%'},disabled:isSubmitting,onSubmit:handleSubmit,children:\"\\uB85C\\uADF8\\uC778\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"\\uD68C\\uC6D0\\uC774 \\uC544\\uB2C8\\uC2E0\\uAC00\\uC694?\"})]})]})]});}});}export default withRouter(LoginPage);","map":null,"metadata":{},"sourceType":"module"}