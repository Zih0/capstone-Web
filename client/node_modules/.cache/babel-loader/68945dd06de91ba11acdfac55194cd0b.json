{"ast":null,"code":"import _objectSpread from\"/Users/ziho/testapp2/capstoneWeb/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/ziho/testapp2/capstoneWeb/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/ziho/testapp2/capstoneWeb/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Table,Button,Input}from'antd';import axios from'axios';import{useSelector}from'react-redux';import{Link}from'react-router-dom';import{SearchOutlined}from'@ant-design/icons';var Search=Input.Search;var RegisterCourse=function RegisterCourse(){var user=useSelector(function(state){return state.user;});var _useState=useState([]),_useState2=_slicedToArray(_useState,2),courses=_useState2[0],setCourses=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchText=_useState6[0],setSearchText=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchedColumn=_useState8[0],setSearchedColumn=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),buttondisabled=_useState10[0],setButtondisabled=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),checkKeys=_useState12[0],setCheckKeys=_useState12[1];var getCourses=function getCourses(){setLoading(true);axios.get(\"/api/datas/course\").then(function(response){if(response.data.success){setCourses(_toConsumableArray(response.data.courseInfo));console.log(response.data.courseInfo);setLoading(false);}else{alert(\"수업 정보를 가져오는데 실패했습니다.\");}});};var submitHandler=function submitHandler(){var body={userId:user.userData.studentId,courses:checkKeys};axios.post('/api/datas/update/idincourse',body).then(function(response){if(response.data.success){console.log(response.data);}else{alert('ERROR!!');}});};useEffect(function(){getCourses();},[]);// rowSelection object indicates the need for row selection\nvar getColumnSearchProps=function getColumnSearchProps(dataIndex){return{filterDropdown:function filterDropdown(_ref){var setSelectedKeys=_ref.setSelectedKeys,selectedKeys=_ref.selectedKeys,confirm=_ref.confirm,clearFilters=_ref.clearFilters;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:8},children:[/*#__PURE__*/_jsx(Input,{placeholder:'검색어를 입력해주세요',value:selectedKeys[0],onChange:function onChange(e){return setSelectedKeys(e.target.value?[e.target.value]:[]);},onPressEnter:function onPressEnter(){return handleSearch(selectedKeys,confirm,dataIndex);},style:{width:188,marginBottom:8,display:'block'}}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return handleSearch(selectedKeys,confirm,dataIndex);},icon:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"small\",style:{width:90},children:\"\\uAC80\\uC0C9\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleReset(clearFilters);},size:\"small\",style:{width:90},children:\"\\uCD08\\uAE30\\uD654\"})]});},filterIcon:function filterIcon(filtered){return/*#__PURE__*/_jsx(SearchOutlined,{style:{color:filtered?'#1890ff':undefined}});},onFilter:function onFilter(value,record){return record[dataIndex]?record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()):'';}};};var handleSearch=function handleSearch(selectedKeys,confirm,dataIndex){confirm();setSearchText(selectedKeys[0]);setSearchedColumn(dataIndex);};var handleReset=function handleReset(clearFilters){clearFilters();setSearchText('');};var columns=[_objectSpread({title:'캠퍼스',dataIndex:'campus',key:'campus',width:'10%'},getColumnSearchProps('campus')),_objectSpread({title:'전공',dataIndex:'major',key:'major',width:'20%'},getColumnSearchProps('major')),_objectSpread({title:'학년',dataIndex:'year',key:'year',width:'10%'},getColumnSearchProps('year')),_objectSpread({title:'수업',dataIndex:'course',key:'course',width:'30%'},getColumnSearchProps('course')),_objectSpread({title:'분반',dataIndex:'class',key:'class',width:'10%'},getColumnSearchProps('class')),_objectSpread({title:'담당교수',dataIndex:'prof',key:'prof',width:'10%'},getColumnSearchProps('prof'))];var rowSelection={onChange:function onChange(selectedRowKeys,selectedRows){setCheckKeys(selectedRows);if(selectedRowKeys.length>0){setButtondisabled(true);}else{setButtondisabled(false);}console.log(\"selectedRowKeys: \".concat(selectedRowKeys),'selectedRows: ',selectedRows);console.log(checkKeys);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'80%',margin:'0 auto',marginTop:'2rem'},children:[/*#__PURE__*/_jsx(Table,{rowSelection:rowSelection,columns:columns,dataSource:courses// bordered={true}\n,loading:loading,scroll:{y:450}}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-end',marginRight:'1rem'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:submitHandler,disabled:!buttondisabled,loading:loading,children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"\\uB4F1\\uB85D\\uD558\\uAE30\"})})})]})});};export default RegisterCourse;","map":null,"metadata":{},"sourceType":"module"}